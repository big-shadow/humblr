webpackJsonp([1],{"Ju9/":function(t,e){},NHnr:function(t,e,a){"use strict";function i(t){a("Ju9/")}function n(t){a("agjH")}function r(t){a("tcRc")}function s(t){a("uxz7")}function o(t){a("wOZg")}function c(t){a("tgTK")}Object.defineProperty(e,"__esModule",{value:!0});var l={},u={},d=a("/5sW"),p=a("3EgV"),v=a.n(p),m=a("OjAt"),f=a.n(m),g=a("Dd8w"),h=a.n(g),b=a("NYxO"),x={data:function(){return{drawer:!0,quick_links:[{icon:"dashboard",title:"Dashboard",href:"/"}],assets:[{icon:"domain",title:"Distribution",href:"/"},{icon:"view_list",title:"Inventory",href:"/inventory"}]}},computed:h()({year:function(){return(new Date).getFullYear()}},Object(b.b)(["app_name"])),methods:{logout:function(){this.$auth.destroyToken(),this.$router.push("/login")}}},y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:"",toolbar:""}},[t.$route.meta.public?t._e():[a("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("h3",{staticClass:"ml-3 mt-3"},[t._v("Quick Links")]),t._v(" "),a("v-divider"),t._v(" "),a("v-list",t._l(t.quick_links,function(e,i){return a("v-list-tile",{key:i,attrs:{exact:"",href:e.href}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"},domProps:{innerHTML:t._s(e.icon)}})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"links"},[a("router-link",{attrs:{to:e.href}},[t._v(t._s(e.title))])],1)],1)],1)})),t._v(" "),a("h3",{staticClass:"ml-3"},[t._v("Assets")]),t._v(" "),a("v-divider"),t._v(" "),a("v-list",t._l(t.assets,function(e,i){return a("v-list-tile",{key:i,attrs:{exact:"",href:e.href}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"},domProps:{innerHTML:t._s(e.icon)}})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"links"},[a("router-link",{attrs:{to:e.href}},[t._v(t._s(e.title))])],1)],1)],1)}))],1),t._v(" "),a("v-toolbar",{attrs:{fixed:"",app:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),a("v-toolbar-title",{staticClass:"title site-title",domProps:{textContent:t._s(t.app_name)}})],1)],t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view",{})],1),t._v(" "),a("messenger")],1)],1),t._v(" "),t.$route.meta.public?t._e():a("v-footer",{staticClass:"px-2",attrs:{app:""}},[a("span",[t._v(t._s(t.app_name)+" © "+t._s(t.year))]),t._v(" "),a("v-spacer"),t._v(" "),a("a",{on:{click:t.logout}},[t._v("Log Out")])],1)],2)},k=[],$={render:y,staticRenderFns:k},w=$,C=a("VU/8"),P=C(x,w,!1,null,null,null),S=P.exports,I=a("/ocq"),q={name:"login",data:function(){return{valid:!1,username:String(),password:String()}},methods:{login:_.throttle(function(){var t=this;if(this.$refs.form.validate()){var e=new FormData;e.append("client_id",1),e.append("client_secret","dv7Nx9qDP1FBOr9Qpw9PDrb1kbOgkavHzZ6lFBfJ"),e.append("grant_type","password"),e.append("username",this.username),e.append("password",this.password),e.append("secret",""),this.$axios.post("/oauth/token",e).then(function(e){t.$auth.setToken(e.access_token,e.expires_in),t.$router.push("/")}).catch(function(e){console.log(e),t.$store.dispatch("messenger_broadcast",["error","Unauthorized."])})}},1e3)},computed:h()({},Object(b.b)(["app_name"]))},O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{md6:""}},[a("v-card",{attrs:{id:"login"}},[a("v-card-media",{attrs:{src:"static/img/city-at-night.jpg",height:"200px"}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline"},[t._v(t._s(t.app_name)+" Administration")]),t._v(" "),a("span",{staticClass:"subheader"},[t._v("Please log-in to continue.")])])]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{box:"",label:"E-mail Address",rules:[t.$rules.required,t.$rules.email]},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("v-text-field",{attrs:{box:"",label:"Password",type:"password",rules:[t.$rules.required]},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",disabled:!t.valid},nativeOn:{click:function(e){t.login(e)}}},[t._v("Submit")])],1)],1)],1)],1)},D=[],E={render:O,staticRenderFns:D},U=E,R=a("VU/8"),T=i,F=R(q,U,!1,T,"data-v-26dfcca0",null),j=F.exports,N={name:"dashboard",data:function(){return{prop:""}},computed:h()({},Object(b.b)(["app_name"]))},A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-xs-center"},[a("h1",[t._v(t._s(t.app_name)+" Administrative Dashboard")]),t._v(" "),a("div",{pre:!0,attrs:{class:"links mt-2"}},[a("a",{attrs:{href:"#"}},[t._v("Drivers")]),t._v(" "),a("router-link",{attrs:{to:"/inventory"}},[t._v("Inventory")]),t._v(" "),a("a",{attrs:{href:"#"}},[t._v("Orders")])],1)])},M=[],z={render:A,staticRenderFns:M},V=z,H=a("VU/8"),B=H(N,V,!1,null,null,null),L=B.exports,G={name:"add-stock",props:{product:Object},data:function(){return{distribution_centers:Array(),distribution_center:Object,distributionCenterRule:function(t){return t&&t.id&&!isNaN(t.id)||"Please select a distribution center."},loading:!1,valid:!1,search:String(),product_inventory:{quantity:Number(),product_id:Number,distribution_center_id:Number},product_cost_audit:{total_cost:Number(),cost_per_unit:Number(),supplier_note:String}}},methods:{getDistributionCenters:_.debounce(function(t){var e=this,a="/api/distribution_centers/"+this.product.id;this.loading=!0,t&&(a+="/"+this.search),this.$axios.get(a).then(function(t){e.distribution_centers=t.data.map(function(t){return t.product_inventories.length>0?(t.quantity=t.product_inventories[0].quantity,t.product_inventory_id=t.product_inventories[0].id,t.in_stock=!0):t.quantity=0,t}),e.loading=!1}).catch(function(t){console.log(t)})},500),addStock:_.debounce(function(){var t=this,e=this.$axios.post("/api/product_cost_audit",{data:{units_purchased:this.product_inventory.quantity,total_cost:this.product_cost_audit.total_cost,supplier_note:this.product_cost_audit.supplier_note,product_id:this.product.id}}),a={data:{quantity:this.product_inventory.quantity,distribution_center_id:this.distribution_center.id,product_id:this.product.id}},i=null;!0===this.distribution_center.in_stock?(a.data.id=this.distribution_center.product_inventory_id,a.data.quantity=Number(a.data.quantity)+Number(this.distribution_center.quantity),i=this.$axios.put("/api/product_inventory",a)):i=this.$axios.post("/api/product_inventory",a),this.$refs.form.validate()&&axios.all([e,i]).then(axios.spread(function(e,a){t.$refs.form.reset(),t.$store.dispatch("messenger_broadcast",["success","New inventory was added."])})).catch(function(t){console.log(t)})},3e3,{leading:!0,trailing:!1}),distributionCenterKeyUp:function(){this.search&&this.search.length>1?this.getDistributionCenters(!0):this.getDistributionCenters()}}},Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-flex",{pre:!0,attrs:{xs12:""}},[a("h4",{attrs:{class:"title py-3"}},[t._v("Add New Inventory")])]),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{label:"Distribution Center",autocomplete:"",loading:t.loading,rules:[t.$rules.required,t.distributionCenterRule],"item-text":"name","return-object":"",items:t.distribution_centers,"search-input":t.search,hint:"Begin typing the name of the center.","persistent-hint":""},on:{"update:searchInput":function(e){t.search=e},keyup:t.distributionCenterKeyUp},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t._f("truncate")(e.item.name,50)))]),t._v(" "),a("v-list-tile-sub-title",{staticClass:"caption"},[t._v(t._s(e.item.quantity)+" in stock\n                            - "),a("i",[t._v(t._s(t._f("truncate")(e.item.address,65)))])])],1)]}}]),model:{value:t.distribution_center,callback:function(e){t.distribution_center=e},expression:"distribution_center"}},[a("template",{slot:"no-data"},[a("v-list-tile-content",{staticClass:"pa-2"},[a("h4",[a("v-icon",{attrs:{dark:"",left:"",color:"red"}},[t._v("info_outline")]),t._v("\n                            Oops. That distribution center was not found.\n                        ")],1)])],1)],2)],1),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Gross Cost",rules:[t.$rules.required,t.$rules.money],prefix:"$",maxlength:12},model:{value:t.product_cost_audit.total_cost,callback:function(e){t.$set(t.product_cost_audit,"total_cost",e)},expression:"product_cost_audit.total_cost"}})],1),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Quantity (Units)",rules:[t.$rules.required,t.$rules.number,function(t){return t>0||"Must be greater than zero."}],maxlength:12},model:{value:t.product_inventory.quantity,callback:function(e){t.$set(t.product_inventory,"quantity",e)},expression:"product_inventory.quantity"}})],1),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-tooltip",{attrs:{right:"","nudge-right":5}},[a("v-text-field",{attrs:{slot:"activator",label:"Cost Per-Unit",value:t._f("round")(t.product_cost_audit.total_cost/t.product_inventory.quantity,2),disabled:"",prefix:"$",rules:[t.$rules.number]},slot:"activator"}),t._v(" "),a("span",[t._v("Gross Cost ÷ Quantity")])],1)],1),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{disabled:!t.valid},on:{click:t.addStock}},[t._v("Add")])],1)],1)],1)},Z=[],J={render:Q,staticRenderFns:Z},K=J,Y=a("VU/8"),W=n,X=Y(G,K,!1,W,"data-v-ad9db6cc",null),tt=X.exports,et={name:"product-details",props:{product:Object,active:Boolean},data:function(){return{lp:{title:"",description:"",price:0},more:!1}},created:function(){_.assign(this.lp,this.product)},methods:{updateProduct:_.throttle(function(){var t=this;this.$axios.put("/api/product",{data:this.lp}).then(function(e){t.$emit("update:product",e),t.$store.dispatch("messenger_broadcast",["success","Product updated."])}).catch(function(t){console.log(t)})},3e3),updateProductImage:_.throttle(function(t){var e=this,a={headers:{"content-type":"multipart/form-data"}},i=new FormData;i.append("id",this.lp.id),i.append("product_image",t,t.name),console.log("name : "+t.name),console.log("size : "+t.size),console.log("type : "+t.type),console.log("date : "+t.lastModified),this.$axios.post("/api/product/image",i,a).then(function(t){t.image_filename&&(e.lp.image_path=e.$configuration.api_url+"product_images/"+t.image_filename,e.lp.image_filename=t.image_filename),e.$emit("update:product",e.lp),e.$forceUpdate(),e.$store.dispatch("messenger_broadcast",["success","Image was uploaded."])}).catch(function(t){console.log(t)})},3e3)},components:{AddStock:tt}},at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"product-tab",attrs:{flat:"",height:"530px"}},[a("v-card-title",{pre:!0,attrs:{"primary-title":""}},[a("span",{attrs:{class:"headline"}},[t._v("Product Details")])]),t._v(" "),a("v-card-text",{staticClass:"card--text"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"d-flex":"",md4:""}},[a("v-avatar",{key:t.lp.image_filename,attrs:{tile:!1,size:"120px"}},[a("img",{attrs:{alt:"avatar",src:t.lp.image_path}}),t._v(" "),a("v-spacer")],1)],1),t._v(" "),a("v-flex",{attrs:{md8:""}},[a("v-text-field",{attrs:{label:"Product Title"},model:{value:t.lp.title,callback:function(e){t.$set(t.lp,"title",e)},expression:"lp.title"}}),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-layout",{attrs:{column:""}},[a("v-text-field",{attrs:{label:"Retail Price",prefix:"$"},model:{value:t.lp.price,callback:function(e){t.$set(t.lp,"price",e)},expression:"lp.price"}})],1),t._v(" "),a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"text-xs-right"},[a("file-upload-button",{attrs:{title:"Upload Photo",selectedCallback:t.updateProductImage}})],1)])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-layout",{attrs:{row:""}},[a("add-stock",{attrs:{product:t.lp},on:{"update:product":function(e){t.lp=e}}})],1),t._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-divider"),t._v(" "),a("a",{on:{click:function(e){t.more=!t.more}}},[a("v-icon",[t._v("arrow_drop_down")]),t._v(" "),a("span",{domProps:{innerHTML:t._s("Show "+(t.more?"Less":"More"))}}),t._v(" "),a("v-icon",[t._v("arrow_drop_down")])],1),t._v(" "),a("v-divider")],1),t._v(" "),t.more?a("v-layout",{attrs:{row:""}},[a("v-text-field",{attrs:{"multi-line":"",label:"Product Description"},model:{value:t.lp.description,callback:function(e){t.$set(t.lp,"description",e)},expression:"lp.description"}})],1):t._e()],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){t.updateProduct(e)}}},[t._v("Save\n            "),a("v-icon",{attrs:{right:""}},[t._v("check_circle")])],1)],1)],1)},it=[],nt={render:at,staticRenderFns:it},rt=nt,st=a("VU/8"),ot=r,ct=st(et,rt,!1,ot,"data-v-02924317",null),lt=ct.exports,ut={name:"product-inventory",props:{product:Object},data:function(){return{productInventories:[],search:String(),loading:!1,pagination:{pager:1,pages:0}}},created:function(){this.getProductInventories()},methods:{getProductInventories:_.debounce(function(t){var e=this,a="/api/distribution_centers/"+this.product.id;this.loading=!0,this.search.length>1&&(a+="/"+this.search),this.pagination.pager=t||this.pagination.pager,this.$axios.get(a,{params:{page:this.pagination.pager}}).then(function(t){e.productInventories=t.data,e.pagination.pages=t.meta.last_page,e.pagination.rowsPerPage=t.meta.per_page,e.pagination.totalItems=t.meta.total,e.loading=!1}).catch(function(t){console.log(t)})},500)}},dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"",height:"530px"}},[a("v-card-title",{pre:!0,attrs:{"primary-title":""}},[a("span",{attrs:{class:"headline"}},[t._v("Product Inventory")])]),t._v(" "),a("v-card-text",{staticClass:"card--text"},[a("v-data-table",{attrs:{items:t.productInventories,"hide-actions":"",pagination:t.pagination,"disable-initial-sort":"",loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",{staticClass:"text-xs-left table--header"},[a("th",[t._v("Distribution Center")]),t._v(" "),a("th",[t._v("Address")]),t._v(" "),a("th",{staticClass:"text-xs-right"},[t._v("Units")])])]}},{key:"items",fn:function(e){return[a("tr",{staticClass:"caption"},[a("td",[t._v(t._s(t._f("truncate")(e.item.name,50)))]),t._v(" "),a("td",[t._v(t._s(t._f("truncate")(e.item.address,50)))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.product_inventories[0].quantity))])])]}}])}),t._v(" "),t.pagination.pages>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.pages},model:{value:t.pagination.pager,callback:function(e){t.$set(t.pagination,"pager",e)},expression:"pagination.pager"}})],1):t._e()],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){}}},[t._v("Thing\n            "),a("v-icon",{attrs:{right:""}},[t._v("check_circle")])],1)],1)],1)},pt=[],vt={render:dt,staticRenderFns:pt},_t=vt,mt=a("VU/8"),ft=s,gt=mt(ut,_t,!1,ft,"data-v-5c2942ed",null),ht=gt.exports,bt={name:"edit-product",props:{product:Object,active:Boolean},data:function(){return{active_tab:"general",lp:{}}},created:function(){_.assign(this.lp,this.product)},methods:{deactivate:function(){this.$emit("update:active",!1)}},components:{ProductDetails:lt,ProductInventory:ht}},xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tabs",{attrs:{scrollable:!1,"slider-color":"primary",color:"grey darken-4"},model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[a("v-tab",{pre:!0,attrs:{ripple:"",key:"general",href:"#general"}},[t._v("General")]),t._v(" "),a("v-tab",{pre:!0,attrs:{ripple:"",key:"inventory",href:"#inventory"}},[t._v("Inventory")]),t._v(" "),a("v-menu",{staticStyle:{width:"100%"},attrs:{disabled:""},on:{click:function(t){t.preventDefault()}}}),t._v(" "),a("v-menu",{attrs:{"offset-y":""}},[a("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[t._v("More\n            "),a("v-icon",[t._v("arrow_drop_down")])],1),t._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(t){}}},[a("v-list-tile-title",[t._v("Delete")])],1)],1)],1),t._v(" "),a("v-tab",[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},nativeOn:{click:function(e){t.deactivate(e)}}},[a("v-icon",[t._v("close")])],1)],1),t._v(" "),a("v-tabs-items",[a("v-tab-item",{key:"general",attrs:{id:"general"}},[t.active?a("product-details",{attrs:{product:t.lp},on:{"update:product":function(e){t.lp=e}}}):t._e()],1),t._v(" "),a("v-tab-item",{key:"inventory",attrs:{id:"inventory"}},[t.active?a("product-inventory",{attrs:{product:t.lp},on:{"update:product":function(e){t.lp=e}}}):t._e()],1)],1)],1)},yt=[],kt={render:xt,staticRenderFns:yt},$t=kt,wt=a("VU/8"),Ct=wt(bt,$t,!1,null,null,null),Pt=Ct.exports,St={name:"product-details",props:{product:Object,active:Boolean},data:function(){return{valid:!1,lp:{title:String(),description:String(),price:0}}},created:function(){_.assign(this.lp,this.product),this.lp.image_filename="default.png",this.lp.image_path=this.$configuration.api_url+"product_images/"+this.lp.image_filename},methods:{createProduct:_.throttle(function(){var t=this;this.$refs.form.validate()&&this.$axios.post("/api/product",{data:this.lp}).then(function(e){console.log(e),t.lp=e,t.lp.image_path=t.$configuration.api_url+"product_images/"+t.lp.image_filename,t.$store.dispatch("messenger_broadcast",["success","Product updated."])}).catch(function(t){console.log(t)})},3e3),updateProductImage:_.throttle(function(t){var e=this,a={headers:{"content-type":"multipart/form-data"}},i=new FormData;i.append("id",this.lp.id),i.append("product_image",t,t.name),console.log("name : "+t.name),console.log("size : "+t.size),console.log("type : "+t.type),console.log("date : "+t.lastModified),this.$axios.post("/api/product/image",i,a).then(function(t){t.image_filename&&(e.lp.image_path=e.$configuration.api_url+"product_images/"+t.image_filename,e.lp.image_filename=t.image_filename),e.$forceUpdate(),e.$store.dispatch("messenger_broadcast",["success","Image was uploaded."])}).catch(function(t){console.log(t)})},3e3),deactivate:function(){this.$refs.form.reset(),this.$emit("update:active",!1)}}},It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-toolbar",{attrs:{card:""}},[a("v-toolbar-title",{pre:!0},[t._v("Add A Product")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.deactivate(e)}}},[a("v-icon",[t._v("close")])],1)],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"d-flex":"",md4:""}},[a("v-avatar",{key:t.lp.image_filename,attrs:{tile:!1,size:"120px"}},[a("img",{attrs:{alt:"avatar",src:t.lp.image_path}}),t._v(" "),a("v-spacer")],1)],1),t._v(" "),a("v-flex",{attrs:{md8:""}},[a("v-text-field",{attrs:{label:"Product Title",rules:[t.$rules.words]},model:{value:t.lp.title,callback:function(e){t.$set(t.lp,"title",e)},expression:"lp.title"}}),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-layout",{attrs:{column:""}},[a("v-text-field",{attrs:{label:"Retail Price",prefix:"$",rules:[t.$rules.money]},model:{value:t.lp.price,callback:function(e){t.$set(t.lp,"price",e)},expression:"lp.price"}})],1),t._v(" "),a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"text-xs-right"},[a("file-upload-button",{attrs:{disabled:!this.lp.id,title:"Upload Photo",selectedCallback:t.updateProductImage}})],1)])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-text-field",{attrs:{"multi-line":"",label:"Product Description",rules:[t.$rules.words]},model:{value:t.lp.description,callback:function(e){t.$set(t.lp,"description",e)},expression:"lp.description"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",disabled:!t.valid},nativeOn:{click:function(e){t.createProduct(e)}}},[t._v("Save\n            "),a("v-icon",{attrs:{right:""}},[t._v("check_circle")])],1)],1)],1)},qt=[],Ot={render:It,staticRenderFns:qt},Dt=Ot,Et=a("VU/8"),Ut=Et(St,Dt,!1,null,null,null),Rt=Ut.exports,Tt={name:"inventory",data:function(){return{products:[],headers:[{text:"Image",value:"image",align:"center",sortable:!1},{text:"Product Title",value:"title",align:"left",sortable:!1},{text:"Description",value:"description",align:"left",sortable:!1},{text:"Price",value:"price",align:"right",sortable:!1},{text:"Average C.P.U.",value:"average_cpu",align:"right",sortable:!1},{text:"Gross Stock",value:"stock",align:"right",sortable:!1},{text:"Edit",value:"edit",align:"center",sortable:!1}],search:String(),loading:!1,pagination:{pager:1,pages:0},partials:{edit:{product:{},active:!1},add:{product:{},active:!1}}}},created:function(){this.getProducts()},methods:{getProducts:_.debounce(function(t){var e=this,a="/api/products";this.loading=!0,this.search.length>1&&(a+="/"+this.search),this.pagination.pager=t||this.pagination.pager,this.$axios.get(a,{params:{page:this.pagination.pager}}).then(function(t){e.products=t.data.map(function(t){return t.image_filename||(t.image_filename="default.png"),t.image_path=e.$configuration.api_url+"product_images/"+t.image_filename,t}),e.pagination.pages=t.meta.last_page,e.pagination.rowsPerPage=t.meta.per_page,e.pagination.totalItems=t.meta.total,e.loading=!1}).catch(function(t){console.log(t)})},500),editProduct:function(t){this.partials.edit.product=t,this.partials.edit.active=!0}},watch:{"pagination.pager":function(){this.getProducts()},"partials.edit.active":function(){!1===this.partials.edit.active&&this.getProducts()},"partials.add.active":function(){!1===this.partials.add.active&&this.getProducts()}},components:{EditProduct:Pt,AddProduct:Rt}},Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{pre:!0,attrs:{md8:"",class:"px-2"}},[a("h1",{attrs:{class:"headline"}},[t._v("Inventory")]),t._v(" "),a("p",{attrs:{class:"body-1 grey--text"}},[t._v("Here you can create, update and delete product information, images, and\n                inventories.")])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-flex",{attrs:{md4:""}},[a("v-text-field",{staticClass:"search-box",attrs:{"solo-inverted":"","append-icon":"search"},on:{keyup:function(e){t.getProducts(1)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,pagination:t.pagination,"hide-actions":"","disable-initial-sort":"",loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[a("v-avatar",{key:e.item.image_filename,attrs:{tile:!1,size:"24px"}},[a("img",{attrs:{alt:"avatar",src:e.item.image_path}})])],1),t._v(" "),a("td",[t._v(t._s(t._f("truncate")(e.item.title,45)))]),t._v(" "),a("td",[t._v(t._s(t._f("truncate")(e.item.description,35)))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.price)))]),t._v(" "),isNaN(e.item.average_cpu)?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.average_cpu))]):a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.average_cpu)))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.gross_stock))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){t.editProduct(e.item)}}},[a("v-icon",[t._v("edit")])],1)],1)]}}])}),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.pages},model:{value:t.pagination.pager,callback:function(e){t.$set(t.pagination,"pager",e)},expression:"pagination.pager"}})],1),t._v(" "),a("v-btn",{staticClass:"mb-5 mr-2",attrs:{fab:"",color:"accent",fixed:"",right:"",bottom:"",ripple:""},nativeOn:{click:function(e){t.partials.add.active=!0}}},[a("v-icon",[t._v("add")])],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.partials.edit.active,callback:function(e){t.$set(t.partials.edit,"active",e)},expression:"partials.edit.active"}},[t.partials.edit.active?a("edit-product",{attrs:{active:t.partials.edit.active,product:t.partials.edit.product},on:{"update:active":function(e){t.$set(t.partials.edit,"active",e)},"update:product":function(e){t.$set(t.partials.edit,"product",e)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.partials.add.active,callback:function(e){t.$set(t.partials.add,"active",e)},expression:"partials.add.active"}},[t.partials.add.active?a("add-product",{attrs:{active:t.partials.add.active,product:t.partials.add.product},on:{"update:active":function(e){t.$set(t.partials.add,"active",e)},"update:product":function(e){t.$set(t.partials.add,"product",e)}}}):t._e()],1)],1)},jt=[],Nt={render:Ft,staticRenderFns:jt},At=Nt,Mt=a("VU/8"),zt=Mt(Tt,At,!1,null,null,null),Vt=zt.exports;d.a.use(I.a);var Ht=new I.a({mode:"history",routes:[{path:"/login",name:"Login",component:j,meta:{public:!0}},{path:"/",name:"Dashboard",component:L},{path:"/inventory",name:"Inventory",component:Vt}]});Ht.beforeEach(function(t,e,a){var i=d.a.auth.isAuthenticated();t.meta.public&&i?a({path:"/"}):t.meta.public||i?a():a({path:"/login"})});var Bt=Ht,Lt=a("d7EF"),Gt=a.n(Lt);d.a.use(b.a);var Qt=new b.a.Store({state:{messenger:{active:!1,color:String(),message:String()}},mutations:{deactivate_messenger:function(t){t.messenger.active=!1}},actions:{messenger_broadcast:function(t,e){var a=(t.commit,t.state),i=Gt()(e,2),n=i[0],r=i[1];a.messenger.color=n,a.messenger.message=r,a.messenger.active=!0,setTimeout(function(){a.messenger.active=!1},d.a.configuration.messenger_timeout+250)}},getters:{app_name:function(t){return d.a.configuration.app_name},messenger:function(t){return t.messenger}}}),Zt=Qt,Jt=a("HSQo"),Kt=a.n(Jt),Yt=function(t){t.configuration={api_url:"http://localhost:8000/",app_name:"Humblr.io",request_timeout:1/0,production:!1,messenger_timeout:3e3}};Kt()(d.a.prototype,{$configuration:{get:function(){return d.a.configuration}}});var Wt=function(t){t.rules={required:function(t){return!!t||"Required."},email:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"Invalid e-mail."},number:function(t){return!isNaN(t)||"Must be a number."},money:function(t){return/^(\d+\.\d{2})|(\d+)$/.test(t)||"Must be currency."},words:function(t){return/^[\w|\s|\d]{3,50}$/.test(t)||"Must be letters, numbers and/or spaces; and between 3 and 50 characters."}}};Kt()(d.a.prototype,{$rules:{get:function(){return d.a.rules}}});var Xt=a("//Fk"),te=a.n(Xt),ee=function(t){t.axios=axios.create({baseURL:t.configuration.api_url,timeout:t.configuration.request_timeout}),t.axios.interceptors.request.use(function(e){return t.configuration.production||(e.params||(e.params={}),e.params.XDEBUG_SESSION_START="PHPSTORM",console.log("Request:",e)),e},function(t){return te.a.reject(t)}),t.axios.interceptors.response.use(function(e){return t.configuration.production||console.log("Response:",e),e.data},function(t){return te.a.reject(t)})};Kt()(d.a.prototype,{$axios:{get:function(){return d.a.axios}}});var ae=function(t){t.auth={getToken:function(){var t=localStorage.getItem("access_token"),e=localStorage.getItem("expires_in");return t&&e?Date.now()>parseInt(e)?(this.destroyToken(),null):t:null},setToken:function(t,e){localStorage.setItem("access_token",t),localStorage.setItem("expires_in",parseInt(e)+Date.now())},destroyToken:function(){localStorage.removeItem("access_token"),localStorage.removeItem("expires_in")},isAuthenticated:function(){return this.getToken()}},Kt()(t.prototype,{$auth:{get:function(){return t.auth}}})},ie=function(t){t.file={imageExists:function(t){return new te.a(function(e,a){var i=new Image;i.addEventListener("load",e),i.addEventListener("error",a),i.src=t})}}};Kt()(d.a.prototype,{$file:{get:function(){return d.a.file}}}),d.a.filter("round",function(t,e){var a=Math.pow(10,e);return Math.round(t*a)/a});var ne={name:"file-upload-button",props:{selectedCallback:Function,title:String(),disabled:!1},methods:{fileSelected:function(t){this.selectedCallback&&(t.target.files[0]?this.selectedCallback(t.target.files[0]):this.selectedCallback(null))}}},re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{staticClass:"upload--button",attrs:{disabled:t.disabled}},[t._v("\n    "+t._s(t.title)),a("input",{attrs:{type:"file"},on:{change:t.fileSelected}})])},se=[],oe={render:re,staticRenderFns:se},ce=oe,le=a("VU/8"),ue=o,de=le(ne,ce,!1,ue,"data-v-7a901a70",null),pe=de.exports,ve={name:"messenger",computed:h()({},Object(b.b)(["messenger"]))},_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{timeout:t.$configuration.messenger_timeout,color:t.messenger.color,bottom:"","multi-line":!1,vertical:!1},model:{value:t.messenger.active,callback:function(e){t.$set(t.messenger,"active",e)},expression:"messenger.active"}},[t._v("\n    "+t._s(t.messenger.message)+"\n    "),a("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.$store.commit("deactivate_messenger")}}},[t._v("Close")])],1)},me=[],fe={render:_e,staticRenderFns:me},ge=fe,he=a("VU/8"),be=he(ve,ge,!1,null,null,null),xe=be.exports,ye={name:"loading-overlay"},ke=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},$e=[],we={render:ke,staticRenderFns:$e},Ce=we,Pe=a("VU/8"),Se=c,Ie=Pe(ye,Ce,!1,Se,"data-v-6df0bb1e",null),qe=Ie.exports;d.a.component("file-upload-button",pe),d.a.component("messenger",xe),d.a.component("loading-overlay",qe),d.a.use(v.a,{theme:{primary:"#E9D460",secondary:"#424242",accent:"#674172",error:"#C0392B",info:"#446CB3",success:"#1E824C",warning:"#EB9532"}}),d.a.use(Yt),d.a.use(Wt),d.a.use(ae),d.a.use(ee),d.a.use(ie),d.a.use(f.a),d.a.use(l),d.a.use(u),d.a.config.productionTip=!1,new d.a({el:"#app",router:Bt,store:Zt,render:function(t){return t(S)}})},agjH:function(t,e){},tcRc:function(t,e){},tgTK:function(t,e){},uxz7:function(t,e){},wOZg:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8145520d16432c3420ee.js.map